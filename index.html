<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WhatsApp Cloud API Signup - SRLines Software House</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #f4f7fa;
        color: #333;
        padding: 20px;
    }
    h1 {
        color: #075E54;
    }
    #infoBox {
        background: #fff;
        border: 1px solid #ddd;
        padding: 15px;
        border-radius: 8px;
        margin-top: 20px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        overflow-x: auto;
        max-width: 100%;
    }
    .uncopyable {
        user-select: none;
        font-weight: bold;
        color: #666;
    }
    #copyButton {
        background-color: #25D366;
        color: white;
        padding: 10px 20px;
        border: none;
        margin-top: 10px;
        cursor: pointer;
        border-radius: 5px;
    }
    #copyButton:hover {
        background-color: #1ebe5d;
    }
</style>
</head>
<body>

<h1>WhatsApp Cloud API Signup</h1>

<p>Click the button below to sign up your WhatsApp Business Account using Meta WhatsApp Cloud API:</p>

<button id="signupButton">Sign Up with WhatsApp Cloud API</button>

<div id="infoBox" style="display:none;">
    <div><span class="uncopyable">Timestamp:</span> <span id="timestamp"></span></div>
    <div><span class="uncopyable">Name:</span> <span id="name"></span></div>
    <div><span class="uncopyable">Status:</span> <span id="status"></span></div>
    <pre id="copyableInfo"></pre>
    <button id="copyButton">Copy Info</button>
</div>

<script>
const appId = '6673587296096434'; // Your App ID
const redirectUri = 'https://cloudapi.srlines.net'; // Your Redirect URI
const scopes = 'business_management,whatsapp_business_management,whatsapp_messaging,public_profile';

document.getElementById('signupButton').addEventListener('click', () => {
    const authUrl = `https://www.facebook.com/v22.0/dialog/oauth?client_id=${appId}&redirect_uri=${encodeURIComponent(redirectUri)}&scope=${encodeURIComponent(scopes)}&response_type=token`;
    window.open(authUrl);
});

// Simulate OAuth Return Example (Replace this block with your server-side handling of token return)
window.onload = function() {
    // Mock sample data as if returned after successful onboarding (Replace this with your real API response)
    const urlParams = new URLSearchParams(window.location.hash.substr(1));
    const accessToken = urlParams.get('access_token') || 'EAAGb...sample...token'; // Replace in real case
    const businessAccountId = '123456789101112';
    const wabaId = '123456789987654';
    const phoneId = '987654321234567';
    const status = 'Connected';
    const name = 'Client ABC'; // dynamic or hard-coded
    const appId = '6673587296096434';

    if (accessToken) {
        const timestamp = new Date().toLocaleString();

        document.getElementById('timestamp').textContent = timestamp;
        document.getElementById('name').textContent = name;
        document.getElementById('status').textContent = status;

        const copyableContent = 
`Business_Account_ID: ${businessAccountId}
WABA_ID: ${wabaId}
Access_Token: ${accessToken}
Phone_ID: ${phoneId}
App_ID: ${appId}`;

        document.getElementById('copyableInfo').textContent = copyableContent;
        document.getElementById('infoBox').style.display = 'block';
    }
};

document.getElementById('copyButton').addEventListener('click', () => {
    const text = document.getElementById('copyableInfo').textContent;
    navigator.clipboard.writeText(text).then(() => {
        alert('Info copied to clipboard!');
    });
});
</script>

</body>
</html>
